version: '3.9'
services:
    client:
        build:
            context: .
            dockerfile: Dockerfile.client
        volumes: 
            - ./src/client:/code/client
            - ./src/common:/code/client/common
        networks:
            - client
            - server
        depends_on: 
            - server
    server:
        build:
            context: .
            dockerfile: Dockerfile.server
        volumes: 
            - ./src/server:/code/server
            - ./src/common:/code/server/common
        ports: 
            - 50051:50051
        networks:
            - server
networks:
    client:
        driver: bridge
    server:
        driver: bridge
