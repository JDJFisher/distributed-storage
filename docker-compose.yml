version: '3.9'
services:
    client:
        build: ./client
        depends_on:
            - master
        volumes:
            - ./client/:/code/client
        networks:
            - external
        environment:
            - docker=true

    master:
        build: ./master
        volumes:
            - ./master/:/code/master
        networks:
            - internal
            - external
        ports:
            - 6789:6789

    node:
        build: ./node
        depends_on:
            - master
        volumes:
            - ./node/:/code/node
        networks:
            - internal
        ports:
            - 5000:5000
        environment:
            - docker=true

networks:
    internal:
        driver: bridge
    external:
        driver: bridge
