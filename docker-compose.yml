version: '3.9'
services:
    client:
        build:
            context: .
            dockerfile: Dockerfile.client
        volumes: 
            - ./src/client:/code/client
        networks:
            - client
            - server
        depends_on: 
            - server
    server:
        build:
            context: .
            dockerfile: Dockerfile.server
        volumes: 
            - ./src/server:/code/server
        ports: 
            - 5000-5001:5000
        deploy:
            mode: replicated
            replicas: 2
        networks:
            - server
networks:
    client:
        driver: bridge
    server:
        driver: bridge
