syntax = "proto3";

option go_package = "github.com/JDJFisher/distributed-storage/protos";

// Provide the name of the service which is joining (docker service name), allows the network to then send messages back by using the docker DNS
message RegisterRequest {
    string address = 1;
}

message RegisterResponse {}

message AssignRequest {
    enum NodeType {
        HEAD = 0;
        TAIL = 1;
        MID = 2;
    }

    NodeType type = 3;
    string predecessor = 4;
    string successor = 5;
}

message AssignResponse {}

service Chain {
    // Node -> Master - Requesting to join the chain
    rpc Register(RegisterRequest) returns (RegisterResponse);
    // Master -> Node - Assign a node a position in the chain
    rpc Assign(AssignRequest) returns (AssignResponse);
}

